<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pendant Configuration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-gray-900 text-gray-200 font-sans antialiased">
    <div id="app-container" class="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8">
      <!-- Header -->
      <header class="flex justify-between items-center mb-8">
        <div>
          <h1 class="text-2xl sm:text-3xl font-bold text-white">
            Pendant Configuration
          </h1>
          <p class.="text-gray-400">
            Configure settings for your ESP32-S3 Pendant.
          </p>
        </div>
        <div id="ws-status" class="flex items-center space-x-2 text-sm">
          <div
            id="ws-indicator"
            class="w-3 h-3 rounded-full bg-yellow-500 animate-pulse"
          ></div>
          <span id="ws-text" class="text-gray-400">Connecting...</span>
        </div>
      </header>

      <main>
        <!-- Tabs -->
        <div class="mb-6 border-b border-gray-700">
          <nav class="-mb-px flex space-x-6" aria-label="Tabs">
            <button data-tab="live-status" class="tab-link active">
              Live Status
            </button>
            <button data-tab="bindings" class="tab-link">Bindings</button>
            <button data-tab="macros" class="tab-link">Macros</button>
            <button data-tab="settings" class="tab-link">Settings</button>
          </nav>
        </div>

        <!-- Tab Content -->
        <div id="tab-content-container">
          <!-- Live Status Tab -->
          <div id="live-status" class="tab-content active">
            <h2 class="text-xl font-semibold mb-4 text-white">
              Live Hardware Status
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="card">
                <h3 class="card-title">Button Matrix</h3>
                <div
                  id="button-matrix-live"
                  class="grid grid-cols-5 gap-2 p-4 bg-gray-900 rounded-lg"
                ></div>
              </div>
              <div class="card">
                <h3 class="card-title">Selectors & Handwheel</h3>
                <div id="live-selectors-info" class="space-y-3">
                  <div class="flex justify-between items-center">
                    <span class="text-gray-400">Axis Selector:</span>
                    <span
                      id="live-axis-selector"
                      class="font-mono text-cyan-400"
                      >--</span
                    >
                  </div>
                  <div class="flex justify-between items-center">
                    <span class="text-gray-400">Step Selector:</span>
                    <span
                      id="live-step-selector"
                      class="font-mono text-cyan-400"
                      >--</span
                    >
                  </div>
                  <div class="flex justify-between items-center">
                    <span class="text-gray-400">Handwheel Position:</span>
                    <span
                      id="live-handwheel-pos"
                      class="font-mono text-cyan-400"
                      >0</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Bindings Tab -->
          <div id="bindings" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div class="card">
                <h3 class="card-title">Button Bindings</h3>
                <div id="button-config-table" class="space-y-2"></div>
              </div>
              <div class="card">
                <h3 class="card-title">LED Bindings</h3>
                <div id="led-config-table" class="space-y-2"></div>
              </div>
            </div>
          </div>

          <!-- Macros Tab -->
          <div id="macros" class="tab-content">
            <div class="card">
              <h3 class="card-title">Macro Configuration</h3>
              <div id="macro-config-table" class="space-y-4"></div>
              <button id="add-macro-btn" class="btn btn-secondary mt-4">
                Add Macro
              </button>
            </div>
          </div>

          <!-- Settings Tab -->
          <div id="settings" class="tab-content">
            <div class="card max-w-md">
              <h3 class="card-title">General Settings</h3>
              <div class="space-y-4">
                <div>
                  <label
                    for="axes-count"
                    class="block text-sm font-medium text-gray-300 mb-1"
                    >Number of DRO Axes</label
                  >
                  <select id="axes-count" class="input"></select>
                </div>
                <div>
                  <label
                    for="handwheel-button"
                    class="block text-sm font-medium text-gray-300 mb-1"
                    >Handwheel Enable Button</label
                  >
                  <select id="handwheel-button" class="input"></select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Footer Actions -->
      <footer
        class="mt-12 pt-6 border-t border-gray-700 flex flex-col sm:flex-row justify-between items-center gap-4"
      >
        <div id="status-message" class="text-sm text-gray-500 h-5"></div>
        <div class="flex gap-4">
          <button id="fw-update-btn" class="btn btn-secondary">
            Firmware Update
          </button>
          <button id="save-config-btn" class="btn btn-primary">
            Save Configuration
          </button>
        </div>
      </footer>
    </div>

    <script src="script.js"></script>
  </body>
</html>
